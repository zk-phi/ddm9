# DDM9

名刺サイズの９キーパッドです。名刺としてもワンチャン使えるものを想定してデザインしました。

販売予定はいまのところありません。 meishi 交換しましょう。

## イメージ

表

![front](imgs/front.png)

裏

![back](imgs/back.png)

実装例

![built](imgs/built.jpeg)

## 組立
### 部品表

基板の他に：

- コンスルー 付き Pro Micro x1
- Kailh Choc スイッチ x9 (V2 でない)
- SK6812mini LED x9 (オプション)
- 完成した基板をいい感じに設置する手段

が必要です。

### 基板設置のアイデア

一番簡単なのは、基板の隅に大きめのプラ足・ゴム足などを貼り付けて設置です。このとき高さは 6mm 以上稼ぐようにしてください (部品が机に当たります)。万一部品が机に当たってしまってもショートしたりすることがないよう、金属製の机などは避けて作業してください。

次におそらく簡単なのは、名刺サイズの適当な板の四隅に 2mm 程度の穴を開けて、 M2 ネジ・高ナットを使って基板と連結することで底板になってもらう方法です (基板の四隅の穴はそのために開けてあります)。もしこの名刺基板を２枚ゲットすることができたら、片方を底板にしてしまえばネジ締めだけで完成するので楽チンです。

工作に慣れている方は、ケースを自作するのもアリです。

## 免責事項

組み立て中・使用中のトラブルについては保証できません。 DIY の精神でチャレンジしてみてください。

## 工具

最低限必要なもの：

- ハンダ
- ハンダ小手台
- ハンダ小手 (LED をつけたい場合は温度調整機能のあるもの)
- 小手先クリーナー (タワシみたいなやつでもスポンジみたいなやつでも ok)

あったほうがよいもの：

- ハンダ吸い取り線 または ハンダ吸い取り機
- マルチテスター (安物で ok)

### 手順

0. Pro Micro にファームを焼く

QMK Firmware の環境構築をし、

```
git clone https://github.com/zk-phi/qmk_firmware
cd qmk_firmware
sh util/<your_OS>.sh
```

Pro Micro を USB 接続した状態で以下のコマンドを実行

```
make handwired/ddm9:default:avrdude
```

リセットしろと言われたら、 Pro Micro の RST ピンと GND ピンを、金属製のピンセットなど、なにか電気を通すものでショートさせてリセットします。

1. Pro Micro にコンスルーをつける

Pro Micro とキーボード基板を合体するための部品「コンスルー」を取り付けます。

温度調整機能のある小手を持っている場合は、 320 度程度が使いやすいです。

コンスルーには向きがあるので、このあたりを参考に正しく取り付けてください。

https://github.com/MakotoKurauchi/helix/blob/master/Doc/buildguide_jp.md#pro-micro

コンスルーをつけた Pro Micro を PC に USB 接続してみて、問題なく認識されることを確認します。テスターがあれば、接続する前に電源ライン (Vcc と GND) がショートしていないかを確認しておくと安心です。

もし認識されなくなってしまっていたら、ハンダ付け不良の可能性が高いです。万一どれだけハンダを修正しても認識されない場合は、ハンダ付けの過程で破損してしまった可能性もあるので、 Pro Micro を交換することも検討してください。

2. LED をつける (オプション)

LED の半田付けは難しいので、自信がない場合はスキップ推奨です。

SK6812mini を裏側から穴に嵌め、半田付けします。 `+` マークのあるパッドが Vcc です。

LED が熱で変形すると動かなくなってしまうので、最大でも小手先温度を 270 度程度に抑えて半田付けします。

D1, D2, ... D9 の順で直列に繋がっているので、この順番で実装してください。順番通り実装していれば、途中でも Pro Micro をコンスルーで基板裏面に差し込み、 USB ケーブルを繋ぐことで動作確認ができます。慣れるまでは難しいので、１つつけるたびに動作確認をするくらいでもいいかもしれません。

光らない LED がある場合は LED のハンダ不良の可能性が高いです。万一 Pro Micro 自体が PC に認識されなくなってしまった場合、どこかがショートしている可能性が高いです (よくあるのは、LED の取り付け向き間違い)。

LED を剥がす際はハンダをしっかり吸い取って剥がすようにしてください。パッドごと剥がれてしまうと修正が難しくなります。

3. キースイッチをつける

キースイッチを 9 個取り付けます。順番などは気にしなくて ok です。

LED を取り付けていた場合は、ハンダ小手の温度を 320 度程度に戻して大丈夫です。アツアツの小手を LED にジューしてせっかくつけた LED を破壊しないようにだけ注意してください。

X の目印があるピンは Pro Micro の USB コネクタなどにぶつかってしまうので、基板の表面ギリギリでカットしてから、少なめのハンダで (山盛りにしないように) なるべく平らになるようにつけてあげてください。切った足は飛んで行ってしまうことがあり危険なので、指で押さえながら切りましょう。

Pro Micro を差し込んでみて、キー入力ができれば ok です。

4. 活用する

適当な方法で基板を設置してあげてください。

キーマップは `qmk_firmware/keyboards/handwired/ddm9/keymaps/default/keymap.c` に定義されています。

このファイルを修正し、再度 Pro Micro にファームウェアを書き込むことで、好きなキーを入力することができます。

よく使うアプリケーションのショートカット (Web 会議のミュートとか) を設定しておくとちょっと便利です。

